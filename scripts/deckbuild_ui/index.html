<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deckbuild UI</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>Deckbuilding UI</h1>
    <div class="api-config">
      <label for="apiBase">API Base</label>
      <input id="apiBase" type="text" placeholder="https://your-api-host.example.com" />
      <button id="saveApiBaseBtn">Save</button>
    </div>
    <div class="session">Session: <code id="sessionId">-</code></div>
  </header>

  <main class="layout">
    <section class="panel entry">
      <h2>Load Zones</h2>
      <label>Main Deck List</label>
      <textarea id="lockedList" rows="6" placeholder="2 Lightning Bolt&#10;Lightning Bolt"></textarea>
      <label>Main Deck CSV</label>
      <input id="lockedCsvFile" type="file" accept=".csv,text/csv" />

      <label>Swappable Sideboard List</label>
      <textarea id="wobbleList" rows="5" placeholder="1 Negate&#10;2 Disenchant"></textarea>
      <label>Swappable Sideboard CSV</label>
      <input id="wobbleCsvFile" type="file" accept=".csv,text/csv" />

      <label>Ignorable Sideboard List</label>
      <textarea id="ignoredList" rows="5" placeholder="Cards to ignore in optimization"></textarea>
      <label>Ignorable Sideboard CSV</label>
      <input id="ignoredCsvFile" type="file" accept=".csv,text/csv" />

      <div class="row">
        <button id="newSessionBtn">New Session</button>
        <button id="loadPoolBtn">Load Entries</button>
      </div>
      <div id="parseWarnings" class="meta"></div>

      <h2>Evaluate</h2>
      <label>Base P User</label>
      <input id="baseP" type="number" step="0.01" min="0" max="1" value="0.55" />
      <button id="evalBtn">Evaluate</button>
      <table id="evalTable">
        <thead><tr><th>base_p</th><th>deck_bump</th></tr></thead>
        <tbody></tbody>
      </table>

      <h2>Optimizer</h2>
      <div class="row">
        <label for="rankMode">Rank</label>
        <select id="rankMode">
          <option value="user">user</option>
          <option value="mean">mean</option>
          <option value="min">min</option>
        </select>
        <label for="topK">Top K</label>
        <input id="topK" type="number" min="1" max="100" value="15" />
      </div>
      <div class="row">
        <button id="suggestBtn">Suggest Improvements</button>
        <button id="iterateBtn">Auto Iterate</button>
        <button id="beamBtn">Optimize Beam</button>
      </div>
      <div id="optSummary" class="meta"></div>
      <table id="suggestTable">
        <thead><tr><th>remove</th><th>add</th><th>delta</th><th>new score</th></tr></thead>
        <tbody></tbody>
      </table>
      <div id="beamSummary" class="meta"></div>
      <ol id="beamPath"></ol>

      <h2>Optimized Results</h2>
      <div class="row">
        <label for="beamTopK">Top K</label>
        <input id="beamTopK" type="number" min="1" max="20" value="5" />
        <label for="optimizedDeckSelect">Deck</label>
        <select id="optimizedDeckSelect"></select>
      </div>
      <div id="optimizedScore" class="meta"></div>
      <pre id="optimizedPreview" class="deck-preview"></pre>
      <div class="row">
        <button id="applyDeckBtn">Apply This Deck</button>
        <button id="applyPathBtn">Apply Swap Path</button>
      </div>
    </section>

    <section class="panel">
      <h2>Main Deck</h2>
      <div class="meta">Deck count: <span id="deckCount">0</span></div>
      <h3>Basics</h3>
      <div id="basicsBar" class="basics"></div>
      <div id="lockedCards" class="cards"></div>
    </section>

    <section class="panel">
      <h2>Swappable Sideboard</h2>
      <div id="wobbleCards" class="cards"></div>
    </section>

    <section class="panel">
      <h2>Ignorable Sideboard</h2>
      <div id="ignoredCards" class="cards"></div>
    </section>
  </main>

  <script src="/static/app.js"></script>
</body>
</html>
